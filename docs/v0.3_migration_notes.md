# v0.3 Migration Notes (from v0.2 local notes)

Date: 2026-03-01  
Audience: maintainers and teams currently on `json_liveview_render` `~> 0.2`

This note summarizes migration impact from the v0.2 release baseline to the current v0.3 gate draft.

## Executive summary

- No breaking migration is required for v0.2 core API consumers.
- v0.3 additions are primarily opt-in and centered on partial/streaming workflows.
- Experimental surfaces remain explicitly outside the stable core contract.

## v0.2 baseline (stable core contract)

From v0.2, the stable contract surface remains:

- Catalog (`JsonLiveviewRender.Catalog`)
- Spec validation (`JsonLiveviewRender.Spec`)
- Registry (`JsonLiveviewRender.Registry`)
- Renderer (`JsonLiveviewRender.Renderer`)
- Permissions (`JsonLiveviewRender.Permissions`)
- Bindings (`JsonLiveviewRender.Bindings`)
- Schema export (`JsonLiveviewRender.Schema`)
- Debug tooling (`JsonLiveviewRender.Debug`)

Existing non-streaming `Catalog -> Spec -> Render` integrations should continue to work without changes.

## v0.3 gate additions and migration impact

### Partial validation and rendering (opt-in)

New candidate APIs:

- `JsonLiveviewRender.Spec.validate_partial/3`
- renderer option `allow_partial: true`

Migration impact:

- No action required unless you are implementing incremental/streaming rendering.
- Existing `validate/3` + full render paths are unchanged.

### Stream API hardening

v0.3 gate work tightens event sequencing and finalization behavior:

- explicit transition checks for `{:root, id}`, `{:element, id, element}`, and `{:finalize}`
- deterministic duplicate/out-of-order errors
- shared partial-state behavior via `require_complete: false` in finalization/spec conversion paths

Migration impact:

- If you already use stream events, invalid provider or out-of-order payloads now fail explicitly instead of being silently tolerated.
- For well-formed stream pipelines, no migration work is expected.

### Adapter references (experimental)

Included reference modules:

- `JsonLiveviewRender.Stream.Adapter.OpenAI`
- `JsonLiveviewRender.Stream.Adapter.Anthropic`

Migration impact:

- These remain experimental reference adapters; they are not part of the stable core contract.
- Treat malformed supported payloads as explicit error paths and keep provider-normalization policies app-owned.

### DevTools integration (experimental)

DevTools remains opt-in and hard-disabled by default via environment/config gating.

Migration impact:

- No action required for production paths.
- For local debugging, keep explicit enable flags and preserve `dev_tools_force_disable` for sensitive contexts.

## Caveats to carry into release review

- v0.3 gate approval is local-use stability approval for the scope-locked contract, not a blanket expansion of stable API boundaries.
- Companion-package transport adapters and cross-platform surfaces stay out of v0.3 core scope.
- Migration guidance here should be read with:
  - `CHANGELOG.md` (v0.3 release draft)
  - `RELEASE_READINESS.md` (gate checklist)
  - `docs/v0.3_local_use_approval.md` (explicit approval artifact)
